<dom-module id="page-item">
	<style>
		::content #page-item {
			width:100%;
			position:absolute;
			background-color:#FFF;
			top:0;
			margin-left:100%;
			overflow:hidden;
			-webkit-transition: margin-left 750ms cubic-bezier(0.770, 0.000, 0.175, 1.000),
								opacity 750ms cubic-bezier(0.770, 0.000, 0.175, 1.000); 
			   -moz-transition: margin-left 750ms cubic-bezier(0.770, 0.000, 0.175, 1.000),
			   					opacity 750ms cubic-bezier(0.770, 0.000, 0.175, 1.000); 
			     -o-transition: margin-left 750ms cubic-bezier(0.770, 0.000, 0.175, 1.000),
			     				opacity 750ms cubic-bezier(0.770, 0.000, 0.175, 1.000);
			        transition: margin-left 750ms cubic-bezier(0.770, 0.000, 0.175, 1.000),
			        			opacity 750ms cubic-bezier(0.770, 0.000, 0.175, 1.000);



			-webkit-transition-timing-function: cubic-bezier(0.770, 0.000, 0.175, 1.000); 
			   -moz-transition-timing-function: cubic-bezier(0.770, 0.000, 0.175, 1.000); 
			     -o-transition-timing-function: cubic-bezier(0.770, 0.000, 0.175, 1.000); 
			        transition-timing-function: cubic-bezier(0.770, 0.000, 0.175, 1.000);
		};

		.material-shadow {
		  transition:box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
		};

		.material-shadow[elevation="1"] {
		  box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14),
		                  0 1px 5px 0 rgba(0, 0, 0, 0.12),
		                  0 3px 1px -2px rgba(0, 0, 0, 0.2);
		};

		.material-shadow[elevation="2"] {
		  box-shadow:0 4px 5px 0 rgba(0, 0, 0, 0.14),
		                  0 1px 10px 0 rgba(0, 0, 0, 0.12),
		                  0 2px 4px -1px rgba(0, 0, 0, 0.4);
		};

		.material-shadow[elevation="3"] {
		  box-shadow:0 6px 10px 0 rgba(0, 0, 0, 0.14),
		                  0 1px 18px 0 rgba(0, 0, 0, 0.12),
		                  0 3px 5px -1px rgba(0, 0, 0, 0.4);
		};

		.material-shadow[elevation="4"] {
		  box-shadow:0 8px 10px 1px rgba(0, 0, 0, 0.14),
		                  0 3px 14px 2px rgba(0, 0, 0, 0.12),
		                  0 5px 5px -3px rgba(0, 0, 0, 0.4);
		};

		.material-shadow[elevation="5"] {
		  box-shadow:0 16px 24px 2px rgba(0, 0, 0, 0.14),
		                  0  6px 30px 5px rgba(0, 0, 0, 0.12),
		                  0  8px 10px -5px rgba(0, 0, 0, 0.4);
		};


	</style>
	<template>

		<div id="page-item" class="material-shadow" elevation="1">
			<content></content>
		</div>

	</template>
</dom-module>
<script>
	Polymer({
		is: 'page-item',
		behaviors: [Polymer.IronA11yKeysBehavior ],
		listeners: {
			"click": "_clickListener"
		},
		keyBindings: {
			'esc': '_handleEscapeKey'
		},
		page_stack: [],
		ready: function() {
			console.log("page-item ready");
			// DOM OBJECTS
			this.page_item = this.$['page-item'];
			this.default_width = 0;

			var self = this;
			this.page_item.style.marginLeft = "100%";
			this.page_item.style.opacity = "0";
			this.pageOn();
			
  		},

		/* Using IronA11yKeysBehavior, listen for 'esc' key pressed
		 * anywhere on the page (see keyEventTarget property). 
		 * escape will hide a zoomed image.
		 */
		_handleEscapeKey: function(e) {
			
		},

		/* 	Click Listener
			Support users clicking on the small image to get the big one,
			and the big one to hide it and go back to the small one.
		================================================== */
		_clickListener: function(e) {
			//this.zoomed = (e.target.id == 'thumbnail');
			//this.pageOff(e);

		},

		/* WHEN TRANSITION ENDS
		================================================== */
		_onBackgroundTransition: function(e) {
			// console.log("transitionend");
			// this.background.style.display = "none";
			// this.zoom_container.classList.remove('container-zoomed');

		},

		/* PAGE BEHAVIORS
		================================================== */

		// Removes page
		pageOut: function() {

		},

		// Page is no longer active but is visible in the page_stack
		pageOff: function(stack_depth_position, stack_depth) {
			console.log("pageOff");
			console.log("stack_depth_position " + stack_depth_position);
			var left_pos = 100 - stack_depth_position;
			console.log("left_pos " + left_pos);
			this.page_item.style.zIndex = stack_depth;
			this.page_item.style.marginLeft = -left_pos + "%";
			this.page_item.style.opacity = "1";
			
		},

		// Page is at the top of the page_stack
		pageOn: function(single) {
			console.log("pageOn");
			console.log("is single " + single);
			this.page_item.style.marginLeft = "25%";
			this.page_item.style.opacity = "1";
			this.page_item.style.zIndex = 10;
		},


		/* PROPERTIES
		================================================== */
		properties: {
			src: {
				type: String,
				value: ""
			},
			fullSrc: {
				type: String,
				value: ""
			},
			keyEventTarget: { // IronA11yKeysBehavior - listen for esc anywhere on page
				type: Object,
				value: function() {
					return document.body;
				}
			}
		}

	});
</script>
