<!--

`step-block` is a container that shows one of several steps in a typical lesson. It generally
can contain any HTML. Each `step-block` should have a `header` attribute. Step blocks also
have step numbers-at this time, the goal is to have the numbers automatically applied. It
might make sense to build them around `ol` (ordered list) tags, but if there are any elements
that interrupt the steps, maintaining numbering continuity could be a hassle. Thinking about
making something count them and apply numbering at page load time.

Example:

	<lesson-block>
	  ... content ...
	</lesson-block>

@group Learn Elements
@class lesson-block
-->
<dom-module id="step-block">
	<style>


		:host ::content #step-content {
			font-family: 'Roboto', 'Noto', sans-serif;
			padding: 20px;
			width: 70%;
			/* for large screens */
			max-width: 800px;
			/*margin: 0 auto;*/
			/*padding-top: 30px;*/
			padding-top: 30px;
			background-color: #FFF;
			color:#242424;
		}

		:host ::content #step-content p {
			font-family: 'Roboto', 'Noto', sans-serif;
			font-size: 18px;
			line-height: 26px;
			font-weight: normal;
			/*margin-top: 20px;*/
			margin-top:0;
			margin-bottom: 20px;
		}
		:host ::content #step-content li {
			font-family: 'Roboto', 'Noto', sans-serif;
			font-size: 18px;
			line-height: 26px;
			font-weight: normal;
		}
		:host ::content h2#step-header {
			font-family: 'Roboto', 'Noto', sans-serif;
			color: #338D83;
			font-size: 28px;
			font-weight: bold;
			margin: 0;
			margin-bottom:20px;
		}
		:host ::content h3 {
			font-family: 'Roboto', 'Noto', sans-serif;
			color: #338D83;
			font-size: 26px;
			font-weight: normal;
			margin: 0;
			margin-top:30px;
			margin-bottom:10px;
		}

		:host ::content #step-content .dl-vertical dd {
			margin-left: 0px;
			margin-bottom:20px;
		}
		:host ::content #step-content .dl-vertical dd p {
			margin-bottom:20px;
		}
		:host ::content #step-content .dl-vertical dt {
			float: none;
			width: auto;
			overflow:visible;
			clear: noen;
			text-align: left;
			text-overflow: ellipsis;
			white-space: normal;
		}
		:host ::content #step-content dt {
			font-weight:700;
			font-size: 16px;
			line-height: 22px;
			font-weight:700;
			float: left;
			width: 160px;
			overflow: hidden;
			clear: left;
			text-align: right;
			text-overflow: ellipsis;
			white-space: nowrap;
		}
		:host ::content #step-content dd {

			margin-left:0;
			margin-bottom:20px;
			font-size: 16px;
			line-height: 22px;
			margin-left: 180px;
			margin-bottom:10px;
		}
		:host ::content #step-content dd p {
			font-size: 16px;
			line-height: 22px;
			margin-bottom:10px;
		}

		:host ::content #step-content li h4 {
			margin:0;
			font-weight:700;
			color:#338D83;
		}
		:host ::content #step-content .dl-horizontal dd {
			margin-left: 180px;
			margin-bottom:10px;
		}
		:host ::content #step-content .dl-horizontal dd p {
			margin-bottom:10px;
		}
		:host ::content #step-content .dl-horizontal dt {
			float: left;
			width: 160px;
			overflow: hidden;
			clear: left;
			text-align: right;
			text-overflow: ellipsis;
			white-space: nowrap;
		}
		:host ::content #step-content ol {
			list-style-type: none;
			list-style-type: decimal !ie; /*IE 7- hack*/

			margin: 0;
			margin-left: 10px;
			padding: 0;

			counter-reset: li-counter;
		}
		:host ::content #step-content ol > li {

			position: relative;

			padding-top:12px;
			margin-bottom: 10px;
			padding-left: 40px;
			min-height: 45px;
			margin-left:20px;

		}
		:host ::content #step-content li h4 code,  :host ::content #step-content dt code {
			background-color: transparent;
			padding:0;
			border-radius:none;
			font-size: 100%;
		}
		:host ::content #step-content ol > li p {
			margin:0;

		}
		:host ::content #step-content ol > li:before {
			position: absolute;
			top: 0px;
			left: -20px;


			color: #338D83;
			background-color: #D4F0ED;
			padding: 14px;
			height: 20px;
			width: 20px;
			text-align: center;
			border-radius: 50%;
			font-family: Roboto;
			font-weight: 500;
			margin-right: 20px;
			margin-top: 0;

			content: counter(li-counter);
			counter-increment: li-counter;
		}

		/* Begin ordered list styling */
		/*:host ::content #step-content ol {
			counter-reset: item;
			padding-left: 0;
			margin-left: 6em;
		}

		:host ::content #step-content ol li {
			display: block;
			margin-bottom: 3em;
		}

		:host ::content #step-content ol li p {
			margin-top: 0em;
		}

		:host ::content #step-content ol li:before {
			display: inline-block;
			content: counter(item);
			counter-increment: item;
			width: 5em;
			height: 5em;
			border-radius: 100%;
			text-align: center;
			margin-left: -5em;
			background-color: #455a64;
			position: relative;
			left: -1em;
			line-height: 5em;
			margin-bottom: -2.5em;
			color: #ffffff;
		}*/
		/* End ordered list styling */

		:host ::content code {
			background-color: #E0E0E0;
			padding: 4px;
			border-radius: 3px;
			font-size: 85%;
		}

		step-number {
			color: #ffffff;
			background-color: #80CBC4;
			padding: 50px 50px;
			height: 25px;
			width: 25px;
			text-align: center;
			border-radius: 50%;
			font-family: Roboto;
			font-weight: 500;
			margin-right: 20px;
			margin-top: 0;
		}

		content-wrapper {
			display: flex;
			display: -webkit-flex;
			display: -ms-flexbox;
			/*
			Aligns step number to center of step block
			align-items: center;
			*/
			align-items: flex-start;
			-webkit-align-items: flex-start;
			justify-content: center;
			-webkit-justify-content: center;
			margin-bottom: 50px;
		}

		.question {
			top: 0px;
			left: 25px;
			position: relative;
			margin-right: -20px;
		}

		:host ::content h2 .custom-icon, :host ::content h3 .custom-icon{
			/*opacity:0.2;*/
			color:#DDD;
			stroke:#DDD;
		}

		:host ::content h2:hover .custom-icon, h3:hover .custom-icon{
			opacity:1;
			color:#666;
			stroke:#333;
		}
		:host ::content h2 .custom-icon, :host ::content h3 .custom-icon {
			cursor:pointer;
		}

		:host ::content .custom-icon {
			    display: -ms-inline-flexbox;
				display: -webkit-inline-flex;
				display: inline-flex;
				-ms-flex-align: center;
				-webkit-align-items: center;
				align-items: center;
				-ms-flex-pack: center;
				-webkit-justify-content: center;
				justify-content: center;
				width: 28px;
				height: 28px;
				position: relative;
				vertical-align: middle;
				fill: currentcolor;
		};

		.material-shadow {
			transition: box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
		}

		.material-shadow[elevation="1"] {
			box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
		}

		.material-shadow[elevation="2"] {
			box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12), 0 2px 4px -1px rgba(0, 0, 0, 0.4);
		}

		.material-shadow[elevation="3"] {
			box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12), 0 3px 5px -1px rgba(0, 0, 0, 0.4);
		}

		.material-shadow[elevation="4"] {
			box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12), 0 5px 5px -3px rgba(0, 0, 0, 0.4);
		}

		.material-shadow[elevation="5"] {
			box-shadow: 0 16px 24px 2px rgba(0, 0, 0, 0.14), 0 6px 30px 5px rgba(0, 0, 0, 0.12), 0 8px 10px -5px rgba(0, 0, 0, 0.4);
		}

	</style>
	<template>
		<content-wrapper>
			<step-number>{{ stepnum }}</step-number>
			<div id="step-content" class="material-shadow " elevation="1">
				<h2 id="step-header">
					<span>{{ header }}</span>
					<span class="custom-icon">
						<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" class="style-scope iron-icon" style="pointer-events: none; display: block; width: 100%; height: 100%;">
							<g>
								<path style="fill:none;stroke-miterlimit:10;" d="M20,2H4C2.9,2,2,2.9,2,4v18l4-4h14c1.1,0,2-0.9,2-2V4C22,2.9,21.1,2,20,2z"/>
							</g>
							<g>
								<path d="M10.9,12.1c0-0.7,0.1-1.1,0.3-1.4s0.6-0.7,1.1-1.1C12.7,9.3,13,9,13.1,8.7s0.3-0.7,0.3-1c0-0.4-0.1-0.8-0.3-1
									c-0.2-0.2-0.5-0.4-1-0.4c-0.3,0-0.6,0.1-0.9,0.3c-0.2,0.2-0.4,0.5-0.4,0.9h-2l0,0c0-0.9,0.3-1.6,0.9-2.1c0.6-0.5,1.4-0.7,2.4-0.7
									c1,0,1.9,0.3,2.5,0.8c0.6,0.5,0.9,1.2,0.9,2.2c0,0.6-0.2,1.1-0.5,1.6s-0.8,0.9-1.3,1.3c-0.3,0.2-0.5,0.4-0.6,0.7
									C13,11.4,13,11.7,13,12.1H10.9z M13,15h-2.1v-1.7H13V15z"/>
							</g>
						</svg>
					</span>
				</h2> 
				<content></content>

			</div>
			<!-- Put questions here! -->
		</content-wrapper>
	</template>
</dom-module>

<script>
	Polymer({
		is: 'step-block',

		attached: function() {
			this.async(function() {
				var steps = 0;
				var kids = this.parentNode.children;
				for (var i = 0; i < kids.length; i++) {
					if (kids[i].nodeName == this.nodeName) {
						steps += 1;
						if (kids[i] === this) {
							this.stepnum = steps;
							break;
						}
					}
				};
			})
		},

		properties: {
			/**
			 * The primary label for this step.
			 *
			 * @attribute header
			 * @type String
			 * @default ""
			 */
			header: {
				type: String,
				value: ""
			},

			/**
			 * The position of this step among all steps. Not meant to be set by users,
			 * at the moment it gets set at page load time by analyzing all other steps
			 * with the same parent.
			 *
			 * @attribute header
			 * @type String
			 * @default ""
			 */
			stepnum: {
				type: Number,
				value: 0
			}

		}
	});
</script>
